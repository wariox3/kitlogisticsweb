ALTER TABLE  `terceros` ADD  `DigitoVerificacion` SMALLINT NULL DEFAULT  '0' AFTER  `Plazo`;
DROP VIEW sql_if_imp_factura;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `sql_if_imp_factura` AS 
  select 
    `guias`.`Guia` AS `Guia`,
    `guias`.`Remitente` AS `Remitente`,
    `guias`.`DocCliente` AS `DocCliente`,
    `guias`.`NmDestinatario` AS `NmDestinatario`,
    `guias`.`DirDestinatario` AS `DirDestinatario`,
    `ciudades`.`NmCiudad` AS `NmCiudad`,
    `guias`.`FhEntradaBodega` AS `FhEntradaBodega`,
    `guias`.`VrDeclarado` AS `VrDeclarado`,
    `guias`.`VrFlete` AS `VrFlete`,
    `guias`.`VrManejo` AS `VrManejo`,
    `guias`.`Unidades` AS `Unidades`,
    `guias`.`KilosReales` AS `KilosReales`,
    `guias`.`KilosFacturados` AS `KilosFacturados`,
    `guias`.`KilosVolumen` AS `KilosVolumen`,
    `guias`.`Estado` AS `Estado`,
    `guias`.`IdFactura` AS `IdFactura`,
    `facturas`.`FhFac` AS `FhFac`,
    `terceros`.`RazonSocial` AS `RazonSocial`,
    `facturas`.`TFlete` AS `TFlete`,
    `facturas`.`TManejo` AS `TManejo`,
    `facturas`.`TOtros` AS `TOtros`,
    `facturas`.`NroGuias` AS `NroGuias`,
    `informacionempresa`.`Nit` AS `Nit`,
    `informacionempresa`.`Nombre` AS `Nombre`,
    `informacionempresa`.`Direccion` AS `Direccion`,
    `informacionempresa`.`Telefono` AS `Telefono`,
    `informacionempresa`.`Logo` AS `Logo`,
    `facturas`.`FhVenceFac` AS `FhVenceFac`,
    `facturas`.`IdFactura` AS `NumeroFactura`,
    `facturas`.`Plazo` AS `Plazo`,
    `formas_pago`.`NmFormaPago` AS `NmFormaPago`,
    `terceros`.`Direccion` AS `DireccionTercero`,
    `terceros`.`Telefono` AS `TelefonoTercero`,
    `ciudadtercero`.`NmCiudad` AS `NmCiudadTercero`,
    `facturas`.`IdCliente` AS `IdCliente`,
    `facturas`.`Notas` AS `Notas`,
    `facturas`.`TotalFactura` AS `TotalFactura`,
    `terceros`.`DigitoVerificacion` AS `DigitoVerificacion`,
    concat(`facturas`.`IdCliente`,'-',`terceros`.`DigitoVerificacion`) AS `NitCompleto` 
  from 
    ((((((`guias` left join `facturas` on((`guias`.`IdFactura` = `facturas`.`IdFactura`))) left join `terceros` on((`facturas`.`IdCliente` = `terceros`.`IDTercero`))) left join `ciudades` on((`guias`.`IdCiuDestino` = `ciudades`.`IdCiudad`))) left join `informacionempresa` on((`facturas`.`IdEmpresa` = `informacionempresa`.`Id`))) left join `formas_pago` on((`facturas`.`IdFormaPago` = `formas_pago`.`IdFormaPago`))) left join `ciudades` `ciudadtercero` on((`terceros`.`IdCiudad` = `ciudadtercero`.`IdCiudad`)));