ALTER TABLE  `guias` ADD  `Abonos` DOUBLE NULL DEFAULT  '0' AFTER  `IdFactura3`;
ALTER TABLE  `informacionempresa` ADD  `ResolucionMinTransporte` VARCHAR( 10 ) NULL;
DROP TABLE  `facturas_venta`;
CREATE TABLE IF NOT EXISTS `facturas_venta` (
  `Numero` int(11) NOT NULL,
  `TipoFactura` smallint(6) NOT NULL DEFAULT '0',
  `Fecha` date NOT NULL,
  `FhVence` date NOT NULL,
  `IdTercero` varchar(11) COLLATE utf8_spanish_ci NOT NULL,
  `Plazo` smallint(6) NOT NULL,
  `Total` double NOT NULL DEFAULT '0',
  `VrFlete` double DEFAULT '0',
  `VrManejo` double DEFAULT '0',
  `VrOtros` double DEFAULT '0',
  `Exportada` tinyint(4) DEFAULT '0',
  PRIMARY KEY (`Numero`,`TipoFactura`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_spanish_ci;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `sql_im_imprimirmanifiesto` AS 
  select 
    `despachos`.`IdManifiesto` AS `IdManifiesto`,
    `despachos`.`OrdDespacho` AS `OrdDespacho`,
    `despachos`.`FhExpedicion` AS `FhExpedicion`,
    `ciudadorigen`.`NmCiudad` AS `NmCiudadOrigen`,
    `ciudaddestino`.`NmCiudad` AS `NmCiudadDestino`,
    `vehiculos`.`IdPlaca` AS `IdPlaca`,
    `vehiculos`.`Modelo` AS `Modelo`,
    `vehiculos`.`ModeloRep` AS `ModeloRep`,
    `vehiculos`.`Serie` AS `Serie`,
    `vehiculos`.`RegNalCarga` AS `RegNalCarga`,
    `vehiculos`.`VehConfiguracion` AS `VehConfiguracion`,
    `vehiculos`.`PesoVacio` AS `PesoVacio`,
    `vehiculos`.`Soat` AS `Soat`,
    `aseguradora`.`RazonSocial` AS `NmAseguradora`,
    `vehiculos`.`VenceSoat` AS `VenceSoat`,
    `vehiculos`.`PlacaRemolque` AS `PlacaRemolque`,
    `propietario`.`RazonSocial` AS `NmPropietario`,
    `tenedor`.`RazonSocial` AS `NmTenedor`,
    `propietario`.`IDTercero` AS `IdPropietario`,
    `tenedor`.`IDTercero` AS `IdTenedor`,
    `propietario`.`Direccion` AS `DirPropietario`,
    `tenedor`.`Direccion` AS `DirTenedor`,
    `tenedor`.`Telefono` AS `TelTenedor`,
    `propietario`.`Telefono` AS `TelPropietario`,
    `ciudadtenedor`.`NmCiudad` AS `CiudadTenedor`,
    `ciudadpropietario`.`NmCiudad` AS `CiudadPropietario`,
    `conductores`.`Nombre` AS `Nombre`,
    `conductores`.`Apellido1` AS `Apellido1`,
    `conductores`.`Apellido2` AS `Apellido2`,
    `conductores`.`IdConductor` AS `IdConductor`,
    `conductores`.`Direccion` AS `Direccion`,
    `conductores`.`Categoria` AS `Categoria`,
    `despachos`.`VrFlete` AS `VrFlete`,
    `despachos`.`VrDctoRteFte` AS `VrDctoRteFte`,
    `despachos`.`VrDctoIndCom` AS `VrDctoIndCom`,
    `despachos`.`VrAnticipo` AS `VrAnticipo`,
    `despachos`.`VrOtrosDctos` AS `VrOtrosDctos`,
    `informacionempresa`.`Logo` AS `Logo`,
    `informacionempresa`.`NroPoliza` AS `NroPoliza`,
    `informacionempresa`.`VencePoliza` AS `VencePoliza`,
    `despachos`.`NmConductor` AS `NmConductor`,
    `despachos`.`Observaciones` AS `Observaciones`,
    `despachos`.`TotalViaje` AS `TotalViaje`,
    `carrocerias`.`NmCarroceria` AS `NmCarroceria`,
    `departamentoorigen`.`NmDepartamento` AS `DepartamentoOrigen`,
    `departamentosdestino`.`NmDepartamento` AS `DepartamentoDestino`,
    `despachos`.`PagoCargue` AS `PagoCargue`,
    `despachos`.`PagoDescargue` AS `PagoDescargue`,
    `despachos`.`FhPagoSaldo` AS `FhPagoSaldo`,
    `despachos`.`LugarPago` AS `LugarPago`,
    `informacionempresa`.`Aseguradora` AS `Aseguradora`,
    `despachos`.`ManElectronico` AS `ManElectronico`,
    `marcas`.`NmMarca` AS `NmMarca`,
    `colores`.`NmColor` AS `NmColor`,
    `lineas`.`NmLinea` AS `NmLinea`,
    `informacionempresa`.`Nit` AS `NitEmpresa`,
    `informacionempresa`.`Nombre` AS `NombreEmpresa`,
    `informacionempresa`.`Direccion` AS `DireccionEmpresa`,
    `informacionempresa`.`Telefono` AS `TelefonoEmpresa`,
    `informacionempresa`.`DireccionTerritorial` AS `DireccionTerritorial`,
    `informacionempresa`.`CodRegionalMin` AS `CodRegionalMin`,
    `informacionempresa`.`CodEmpresaMin` AS `CodEmpresaMin`,
    `informacionempresa`.`ResolucionMinTransporte` AS `ResolucionMinTransporte` 
  from 
    ((((((((((((((((`despachos` left join `vehiculos` on((`despachos`.`IdVehiculo` = `vehiculos`.`IdPlaca`))) left join `ciudades` `ciudadorigen` on((`despachos`.`IdCiudadOrigen` = `ciudadorigen`.`IdCiudad`))) left join `ciudades` `ciudaddestino` on((`despachos`.`IdCiudadDestino` = `ciudaddestino`.`IdCiudad`))) left join `terceros` `aseguradora` on((`vehiculos`.`IdAseguradora` = `aseguradora`.`IDTercero`))) left join `terceros` `propietario` on((`vehiculos`.`IdPropietario` = `propietario`.`IDTercero`))) left join `terceros` `tenedor` on((`vehiculos`.`IdTenedor` = `tenedor`.`IDTercero`))) left join `ciudades` `ciudadtenedor` on((`tenedor`.`IdCiudad` = `ciudadtenedor`.`IdCiudad`))) left join `ciudades` `ciudadpropietario` on((`propietario`.`IdCiudad` = `ciudadpropietario`.`IdCiudad`))) left join `conductores` on((`despachos`.`IdConductor` = `conductores`.`IdConductor`))) left join `informacionempresa` on((`despachos`.`IdEmpresa` = `informacionempresa`.`Id`))) left join `carrocerias` on((`vehiculos`.`IdCarroceria` = `carrocerias`.`IdCarroceria`))) left join `departamentos` `departamentosdestino` on((`ciudaddestino`.`IdDepartamento` = `departamentosdestino`.`IdDepartamento`))) left join `departamentos` `departamentoorigen` on((`ciudadorigen`.`IdDepartamento` = `departamentoorigen`.`IdDepartamento`))) left join `marcas` on((`vehiculos`.`IdMarca` = `marcas`.`IdMarca`))) left join `colores` on((`vehiculos`.`IdColor` = `colores`.`IdColor`))) left join `lineas` on((`vehiculos`.`IdLinea` = `lineas`.`IdLinea`)));